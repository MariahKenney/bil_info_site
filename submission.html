<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
     <title>Brain Image Library: Data Submission</title>
     <meta http-equiv="x-ua-compatible" content="ie=edge" />
	 <meta name="viewport" content="width=device-width, initial-scale=1.0" />

     <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800" />
     <link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
     <link rel="stylesheet" href="/css/bootstrap.css" />
     <link rel="stylesheet" href="/css/styles.css" />
     <link rel="stylesheet" href="/my.css" />
     <script src="/js/jquery.min.js"></script>

</head>

<body class="bg">
    <div class="container">
        <p>&nbsp;</p>
    </div>
    <div class="container">
    <!--Navigation bar-->
    <div id="topmenu">
    </div>
    <script>
        $(function(){
          $("#topmenu").load("menu.html");
        });
    </script>
    <!--end of Navigation bar-->

    <div class="jumbotron pagejumbotron">


<H1>Data Submission</H1>
<H2>Overview</H2>
A data contributor portal has been created to enable laboratories to submit 
data to the Brain Image Library. The key processes to submit data are:
<ol>
<li><a href="#Setup">Set up your submission account:</a> Setting up your submission account only needs to be done once. </li>
<ol type="A">
<li><a href="#Portal">Create an XSEDE portal account:</a> An XSEDE portal account is required to submit data. 
</li>
<li><a href="#RequestDSP">Request access to the data submission portal:</a> 
You will receive an email message once access has been enabled.  Please 
allow 24 hours for access to be granted.
</li>
<li><a href="#SetPasswd">Set your initial password:</a> 
</li> 
</ol> 
<li><a href="#EnterDSP">Enter the data submission portal:</a> Using your username and password, log into the data submission portal.
</li> 
<li><a href="#CreateCollection">Create a collection:</a> A collection 
is an wrapper associating data with metadata. 
</li>
<li><a href="#UploadImage">Upload image data:</a> Because this is the 
time-limiting step, we suggest this step be started before uploading 
metadata for the collection. 
</li>
<li><a href="#UploadMetadata">Upload metadata:</a>  Collection metadata can 
be uploaded through the portal in spreadsheet format.
</li>
<li><a href="#ValidateData">Validate data:</a>  Validate the data and 
correct any errors discovered. 
</li>
<li><a href="#ReviewSubmit">Review and Submit data:</a> Please correct 
all errors and check all warnings in the validation log prior to submission.
</li>
</ol>
<img src="assets/WebSubmitFlow.png" alt="Data Submission Workflow" 
height="90%" width="90%" />

<H2>Submission Steps</H2>
<p><i>If you have problems with the steps below, do not hesitate to contact 
the <a href="contact.html">BIL Helpdesk</a> for assistance.</i></p>
<ol>
<li id="Setup"><b>Set up your submission account</b>
<ol type="A">

<li id="Portal"><b>Create an XSEDE portal Account</b>
<p>Follow <a href="XSEDEportal.html">these instructions</a> to create an XSEDE portal Account. </p>
</li>

<li id="RequestDSP"><b>Request access to the data submission portal</b>
<p>Send email to <i>bil-support@psc.edu</i> along with your XSEDE Portal
Account. You will receive an email message once access has been enabled.  
Please allow 24 hours for access to be granted.
</p>
</li>

<li id="SetPasswd"><b>Set your initial password:</b>
<p>Follow <a href="password.html">these instructions</a> to set your initial 
password.</p>
</li>
</ol>

<li id="EnterDSP"><b>Enter the data submission portal</b>
To enter the data submission portal, visit 
<a href="submit.brainimagelibrary.org">submit.brainimagelibrary.org</a>. 
At the top right corner of the page (see red arrow in the image below), 
you will find the menu option for the login page: 
</p>
<p>
<img src="assets/SubmissionPortal/DataSubPortal1Arrow.png" alt="login-location" 
height="90%" width="90%" />
</p>
<p>Clicking on this menu option, will bring up the login page (shown below).Enter your PSC username and password on this page. If you are having problems 
logging in, please contact the <a href="contact.html">BIL Helpdesk</a>. </p>
<p>
<img src="assets/SubmissionPortal/DataSubPortalLogin.PNG" alt="login-page" 
height="90%" width="90%" />
</p>
</li>

<li id="CreateCollection"><b>Create a Collection</b>
<p>
The next step in the submission process is to create a collection 
through the portal. A collection is an ingestion wrapper 
that contains one or more related datasets and metadata. (A dataset is 
a stand-alone entry (e.g. an image-volume) with metadata. A dataset can 
contain many 2d image files that are assembled computationally to form 
a more complex two or three dimensional volume.) Collections are tagged 
with common identifying metadata (such as the NIH project that the data 
is associated with) that upon submission will be propagated to each item 
in the collection. This important tagging information will allow BIL to 
report to NIH on data that has begun, but has not yet completed the 
submission process. 
</p><p>
In general, smaller collections are recommended because all datasets 
within a collection must pass the validation process for the collection
bundle to be submitted. A collection can contain a single dataset.
</p>
<p>
Each collection bundle will have a unique dropbox-like landing zone 
directory associated with it (e.g. <em>/bil/lz/user/6247417d691a4548</em>. 
This landing zone directory is where the datasets belonging to the 
collection must be transferred to for validation and ingestion processing. 
</p>
<p>To create a collection, select the <span class="badge badge-secondary">
Collection</span> sub-option of the <span class="badge badge-dark">New</span> 
menu. (See red arrow in the image below.)</p>
<p>
<img src="assets/SubmissionPortal/DataSubPortalNewMenuArrow.png" alt="New-Collection image" 
height="90%" width="90%" />
</p>
<p>Next, enter the required metadata associated with the collection (see 
image below). 
<p>
<img src="assets/SubmissionPortal/DataSubPortalNewCollection.PNG" alt="New-Collection-full image" 
height="90%" width="90%" />
</p>
</li>

<li id="UploadImage"><b>Upload image data</b>
<p>As mentioned above, the submission portal create a landing zone for image
data to be uploaded to. To find this landing zone, select the 
<span class="badge badge-secondary">
Collections</span> sub-option of the 
<span class="badge badge-dark">View</span> 
menu.</p>
<p>
<img src="assets/SubmissionPortal/DataSubPortalViewMenu.PNG" alt="View-Menu" 
height="90%" width="90%" />
</p>
<p>The landing zone is listed under the <span class="badge badge-info">Data 
Path</span> column:
</p>
<p>
<img src="assets/SubmissionPortal/DataSubViewCollections.PNG" alt="View-Collections" 
height="90%" width="90%" />
</p>
<p>
There are many supported ways to transfer files into the landing zone 
directory through the data transfer nodes including rsync, 
Globus Online, sftp, and scp. <span class="badge badge-warning">Due to size, 
image data can not be uploaded through the submission portal. 
It must be uploaded 
separately through the BIL data transfer nodes, which are available 
at the virtual host: upload.brainimagelibrary.org. All users authorized to 
use the data submission portal (submit.brainimagelibrary.org) are also 
authorized to use the data transfer nodes (upload.brainimagelibrary.org). 
The username and passwords are the same on both systems.</span>
</p>

</p>
<ul>
<li>Using rsync to upload.brainimagelibrary.org: An example uploading all data in the directory 
(testproj) as testuser@upload.brainimagelibrary.org is shown below: 
<div class="card bg-light">
<div class="card-body text-left">
<p class="card-text">
<pre>
<code>
testuert@test.psc.edu:~$ rsync -lrtpDvP testproj testuser@upload.brainimagelibrary.org:/bil/lz/testuser/abcdef0123456789
sending incremental file list
testproj/
testproj/data1.tiff
     1356122 100%  126.20MB/s    0:00:00 (xfer#1, to-check=0/2)

sent 1356392 bytes  received 35 bytes  2712854.00 bytes/sec
total size is 1356122  speedup is 1.00

</code>
</pre>
</p>
</div>
</div> 
</li>

<li>Using sftp to upload.brainimagelibrary.org: An example logging into 
the data transfer node as <i>testuser</i> is shown below. The first cd 
command is used to move to the BIL landing zone for the collection. 
The mkdir command is used to create a sub-directory (called <i>mouse1</i> 
in the landing zone, while the second cd command is used to move to this 
subdirectory.  Finally, the put command is used to upload data - in 
this case, a single file  (data1.tiff):
<div class="card bg-light">
<div class="card-body text-left">
<p class="card-text">
<pre>
<code>
$ sftp testuser@upload.brainimagelibrary.org
The authenticity of host 'upload.brainimagelibrary.org (128.182.108.164)' can't be established.
ECDSA key fingerprint is 32:cf:46:44:3d:9c:8e:b2:1d:14:03:66:45:0b:11:29.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'upload.brainimagelibrary.org,128.182.108.164' (ECDSA) to the list of known hosts.
testuser@upload.brainimagelibrary.org's password:
Connected to upload.brainimagelibrary.org.
sftp> cd /bil/lz/testuser/abcdef0123456789
sftp> mkdir /bil/lz/testuser/abcdef0123456789/mouse1
sftp> cd /bil/lz/testuser/abcdef0123456789/mouse1

sftp> put data1.tiff
Uploading data1.tiff to /bil/lz/testuser/abcdef0123456789/mouse1/data1.tiff
data1.tiff                                      0%    0     0.0KB/s   --:-- ETA
data1.tiff                                    100% 1324KB   1.3MB/s   00:00

sftp> exit
</code>
</pre>
</p>
</div>
</div> 
<p>
<span class="badge badge-warning">Due to their ability to resume interupted 
transfers, the use of rsync and Globus is recommended over sftp.</span></p> 
</li>

<li>Using scp to upload.brainimagelibrary.org: An example uploading data 
(data1.tiff) to the landing zone as <i>testuser</i> is shown below: 
<div class="card bg-light">
<div class="card-body text-left">
<p class="card-text">
<pre>
<code>
$ scp data1.tiff testuser@upload.brainimagelibrary.org:/bil/lz/abcdef0123456789/mouse1/data1.tiff
testuser@upload.brainimagelibrary.org's password:
data1.tiff                                                                      0%    0     0.0KB/s   --:-- ETA
data1.tiff                                                                    100% 1324KB   1.3MB/s   00:00

</code>
</pre>
</p>
</div>
</div> 
<p>
<span class="badge badge-warning">Due to their ability to resume interupted 
transfers, the use of rsync and Globus is recommended over scp.</span></p> 
</li>
</li>


</ul>



<div class="card bg-light">
<div class="card-body text-center">
<p class="card-text">
To encourage maximal automatic metadata scraping, the library STRONGLY 
RECOMMENDS ORIGINAL FILES CAPTURED BY THE MICROSCOPE be submitted. 
The ingestion process supports native TIFF and JPEG 2000 image file formats 
as well as formats that are convertible to the OME-TIFF format via the 
bioformats tool. For more information on the bioformats tool see: <br />
<a href="https://docs.openmicroscopy.org/bio-formats/5.7.3/formats/index.html">
https://docs.openmicroscopy.org/bio-formats/5.7.3/formats/index.html</a>.
</p>
</div>
</div> 
</li>



<li id="UploadMetadata"><b>Upload metadata</b>
</li>
<p>Metadata for each dataset can be entered manually through the contributor   
portal, or by uploading a spreadsheet to a collection via the contributor 
portal. Please see the <!-- <a href="http://c00.bil.psc.edu:8095"> --> Contributor 
Portal<!-- </a> --> for the most recent metadata specification.
</p>



<li id="ValidateData"><b>Validate data</b>
<p>Once all data has been uploaded to the landing zone area and all metadata 
has been uploaded to the contributor portal, click on the validate button 
for the collection.
</p>
<p>
The validation process will lock the dataset for changes and scrape 
additional metadata from the submitted files. When the process completes, 
a log will be available for viewing through the portal.
</p> 
</li>


<li id="ReviewSubmit"><b>Review and submit data</b>
<p>When the validation process completes, 
a log will be accessable from the contributor portal. Please examine 
this log and correctany identified warnings and errors. (note: Only an 
error will provent submission, a warning will not necessarly prevent data 
submission. select suppress warnings and resubmit.)      
</p>
<p>
Once you are satisfied that all errors and appropriate warnings have 
been corrected, select submit. 
</p>
</li>
</ol>

<h2>Additional Information</h2>

<p><b>File formats</b></p>
<p>
To encourage maximal automatic metadata scraping, the library STRONGLY 
RECOMMENDS ORIGINAL FILES CAPTURED BY THE MICROSCOPE be submitted. 
</p>
<p>
The ingestion process supports native TIFF and JPEG 2000 image file formats 
as well as formats that are convertible to the OME-TIFF format via the 
bioformats tool. (For more information on the bioformats tool see: 
<a href="https://docs.openmicroscopy.org/bio-formats/5.7.3/formats/index.html">
https://docs.openmicroscopy.org/bio-formats/5.7.3/formats/index.html</a>.)
</p> 
<p>Please
see the <a href="http://c00.bil.psc.edu:8095">Contributor Portal</a> for 
the most recent metadata specification.
</p>

<p>
<p><b>Pre-Submission Processing of Files:</b></p><p>
<p>
If you need to make corrections or do other pre-submission processing on 
one or more files after they heve been transfered to the landing zone, you 
can log in with ssh to c00.bil.psc.edu. 
</p>
<p>By default, the files in the landing zone will only be accessible by you 
and BIL support staff. You can, of course, change the permissions on the 
landing zone to be group or world readable with chmod. This may help if you 
need to share the data with others (such as other lab group members) before 
completing the submission process. 
</p>


<p><b>Assistance and Help</b></p>
<p>If you need assistance with anything, please email: bil-support@psc.edu. 
If the issue is time-critical, you may phone the PSC hotline at: 412-268-6350.
Please note that we are located in the Eastern Time zone. </p> 
<p>
If you are having networking issues related to data transfer (including 
slow transfer speeds), email us at at bil-support@psc.edu and one of our 
networking experts will get in contact with you. If network issues prevent 
data transfer, we may recommend that you send your datasets to us via an
alternate path such on our BrainBall portable device or on LTO tape.  
</p>
<p><b>Distribution Licence</b></p>
Data submitted to the library will be redistributed to others under a 
Creative Commons Attribution-ShareAlike 4.0 International License. In 
addition, data submitters expressly permit the Library data to be 
transferred to and maintained by another open-source repository or by 
a government agency such as the US National Institutes of Health in the 
future.  
</p>
<p>
<b>Release of entries</b></p>
<p>
Data submitted to the library, by default,  will be released as soon 
as possible once data has been validated. Optionally, data submitters 
can select a limited embargo period for their submitted data of up to 
one year. 
</p>
<p><b>Assignment of DOI</b></p>
<div class="card bg-light">
<div class="card-body text-center">
<p class="card-text">
DOI's are not being issued at the current time. We expect to be able to issue 
DOI's for datasets as soon as metadata specifications are stabilized.
</p>
</div>
</div> 

A permanent, citable DOI for the submitted dataset will be created 
through Carnegie Mellon University's KiltHub. A suggested citation for 
users of the dataset will also be associated with the dataset. The DOI 
will point to a a permanent record in the KiltHub system that points 
to the dataset stored in the archive.

</p>
<p><b>Changes to entries after submission</b></p><p>
Changes may be made to submitted entries prior to release. Minor changes, 
such as updating metadata or adding citations may be made after dataset 
release. Major revisions will require the existing entry to be marked as 
obsolete and replaced by a new entry. The DOI pointing to the metadata for 
the obsolete entry may have a superseded-by field added to it to point
users to the superceded entry. There may be also be circumstances in which 
an entry in the library may be marked as withdrawn (for example, research 
misconduct). In those cases, the DOI for the obsolete entry will have a  
withdrawn field added to it.  
</p>
<p><b>Sharing data and computing on data prior to submission</b></p><p>
PSC's Bridges computational resource is an excellent place to explore and share your data with others prior to submission. The data submission landing zone path for your data on Bridges is very fast. 
</p>
<p>
In addition, public data released by the BRAIN Image Library is also available on PSC's Bridges Computational Resource. The Bridges computational resource is available through XSEDE for non-commercial research. Corporate and other users can gain access through PSC's corporate programs: <a href="https://www.psc.edu/services/corporate-programs">https://www.psc.edu/services/corporate-programs.</a> 
</p>
<p><b>Use of Pre-publication Data</b></p><p>
The Library expects all users of the submitted data to grant the authors of the data the right to publish the first paper concerning the dataset within three years of deposit. If there is no publication associated with the dataset, please contact the listed authors for permission to publish. There is no restriction on post-publication data. 
</p>

    </div>
    <!--Bottom Footer -->
    <div id="bottomfooter">
    </div>
    <script>
        $(function(){
          $("#bottomfooter").load("footer.html");
        });
    </script>
    <!--end of bottomfooter-->

    <script src="/js/jquery.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
</div>
</body>
</html>
